From 4df28d9e8b10268c63ede5515e269e0163d1d0d8 Mon Sep 17 00:00:00 2001
From: advaithm <advaith.madhukar@gmail.com>
Date: Sat, 17 Jul 2021 11:58:26 +0530
Subject: [PATCH 1/1] escape paths with regex over quotes in flatpaks

---
 app/src/lib/helpers/linux.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/app/src/lib/helpers/linux.ts b/app/src/lib/helpers/linux.ts
index 73fe58887..2c6213f08 100644
--- a/app/src/lib/helpers/linux.ts
+++ b/app/src/lib/helpers/linux.ts
@@ -82,9 +82,10 @@ export function spawnEditor(
   options: SpawnOptions
 ): ChildProcess {
   if (isFlatpakBuild()) {
+    let EscapedworkingDirectory = workingDirectory.replace(/(\s)/, "\\ ")
     return spawn(
       'flatpak-spawn',
-      ['--host', path, `"${workingDirectory}"`],
+      ['--host', path, EscapedworkingDirectory],
       options
     )
   } else {
-- 
2.32.0

