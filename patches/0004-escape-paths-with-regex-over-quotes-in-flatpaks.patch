From cde0844ece630b85cf9103e3dcd5aa6f3772f06a Mon Sep 17 00:00:00 2001
From: advaithm <advaith.madhukar@gmail.com>
Date: Sun, 18 Jul 2021 19:17:11 +0530
Subject: [PATCH 1/1] escape paths with regex over quotes in flatpaksv2

---
 app/src/lib/helpers/linux.ts | 3 ++-
 1 file changed, 2 insertions(+), 1 deletion(-)

diff --git a/app/src/lib/helpers/linux.ts b/app/src/lib/helpers/linux.ts
index 73fe58887..2761f33db 100644
--- a/app/src/lib/helpers/linux.ts
+++ b/app/src/lib/helpers/linux.ts
@@ -82,9 +82,10 @@ export function spawnEditor(
   options: SpawnOptions
 ): ChildProcess {
   if (isFlatpakBuild()) {
+    let EscapedworkingDirectory = workingDirectory.replace(/(\s)/, "\ ")
     return spawn(
       'flatpak-spawn',
-      ['--host', path, `"${workingDirectory}"`],
+      ['--host', path, EscapedworkingDirectory],
       options
     )
   } else {
-- 
2.32.0

